#!/system/bin/sh

logs=/storage/emulated/0/Xtreme_TweakZ.log
sprop=/data/adb/modules/XtremeTweakZ/system.prop

case "$1" in
	 -A|-a)
	 setprop xtz.sleep 0
	 sed -i '/xtz.sleep=/s/.*/xtz.sleep=0/' $sprop
	 echo "- Enabled Auto Mode by User on $(date +"%d-%m-%Y %r" )\n" >> $logs
	 echo "- Enabled Auto Mode 
- AutoMode will Start within 3 mins"
	 ;;
	 -E|-e)
	 setprop xtz.sleep 1
	 sed -i '/xtz.sleep=/s/.*/xtz.sleep=1/' $sprop
	 setprop xtz.profile 1
	 sed -i '/xtz.profile=/s/.*/xtz.profile=1/' $sprop
	 xtz.tweaks
	 echo "- Enabled Efficient Mode"
	 echo "- Enabled Efficient Mode by User on $(date +"%d-%m-%Y %r" )\n" >> $logs
	 ;;
	 -G|-g)
	 setprop xtz.sleep 1
	 sed -i '/xtz.sleep=/s/.*/xtz.sleep=1/' $sprop
	 setprop xtz.profile 2
	 sed -i '/xtz.profile=/s/.*/xtz.profile=2/' $sprop
	 xtz.tweaks
	 echo "- Enabled Gaming Mode"
	 echo "- Enabled Gaming Mode by User on $(date +"%d-%m-%Y %r" )\n" >> $logs
	 ;;
	 -D|-d)
	 S=$(date +"%s")
	 echo "Started ART optimization"
	 su -c "cmd package bg-dexopt-job"
	 E=$(date +"%s")
	 DIFF=$(($E - $S))
	 echo "- time took: $(($DIFF / 60)) min(s) and $(($DIFF % 60)) sec(s)."
	 ;;
	 -L|-l)
	 if [ "$(getprop xtz.logs)" == "0" ]; then
	 setprop xtz.logs 1
	 sed -i '/xtz.logs=/s/.*/xtz.logs=1/' $sprop
	 echo "Enabled Xtz Logs"
	 else
	 setprop xtz.logs 0
	 sed -i '/xtz.logs=/s/.*/xtz.logs=0/' $sprop
	 echo "Disabled Xtz Logs"
	 fi
	 xtz.onego
	 xtz.tweaks
	 ;;
	 -help|-h|-H|-Help|-HELP)
	 clear
	 echo "  
   Xtreme TweakZ Menu
	 
 use/run : su -c xtz [commands give below]
 example : su -c xtz -G
	 
  -G, -g : Gaming Mode
         : Increases device Performance To Provide Best FPS
           
  -E, -e : Efficient Mode  
         : Provide a Balance Between Performance and Battery 
           
  -A, -a : Auto Mode     
         : Changes Mode Based on GPU Load (above 44% = Gaming)
           
  -D, -d : Art Optimizer
         : Optimises ART runtime to fix UI Lags or Idle Drain
         
  -L, -l : Tweaks Logs
         : Provides Log of node and its value applied by Tweak
"
	 ;; 
esac
