#!/system/bin/sh

# 1 = Efficient | 2 = Gaming
function xtz () {
	if [ -e $1 -a -w $1 ]; then
	case $(getprop xtz.profile) in
	1)
	echo $2 > $1
	;;
	2)
	echo $3 > $1
	;;
	esac
	fi
}

# vm
xtz /proc/sys/vm/stat_interval 10 1
xtz /proc/sys/vm/swappiness 50 100
xtz /proc/sys/vm/vfs_cache_pressure 50 20

# kgsl
xtz /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost 0 3
xtz /sys/class/kgsl/kgsl-3d0/devfreq/polling_interval 10 5
xtz /sys/class/kgsl/kgsl-3d0/throttling 1 0
xtz /sys/class/kgsl/kgsl-3d0/force_clk_on 0 1
xtz /sys/class/kgsl/kgsl-3d0/force_bus_on 0 1
xtz /sys/class/kgsl/kgsl-3d0/force_rail_on 0 1
xtz /sys/class/kgsl/kgsl-3d0/force_no_nap 0 1
xtz /sys/class/kgsl/kgsl-3d0/bus_split 1 0

# stunetune
xtz /dev/stune/top-app/schedtune.boost 1 50
xtz /dev/stune/top-app/schedtune.prefer_idle 0 1
xtz /dev/stune/foreground/schedtune.boost 0 45

# module
xtz /sys/module/mmc_core/parameters/use_spi_crc 1 0

# Schedutil
for cpu in /sys/devices/system/cpu/*/cpufreq/schedutil
do
xtz "${cpu}"/up_rate_limit_us 1000 500
xtz "${cpu}"/down_rate_limit_us 1000 40000
xtz "${cpu}"/iowait_boost_enable 0 1
done

# fs
xtz /proc/sys/fs/lease-break-time 25 5

# kernel
xtz /proc/sys/kernel/perf_cpu_time_max_percent 45 15

# LMK
xtz /sys/module/lowmemorykiller/parameters/lmk_fast_run 0 1
